### 1. プロジェクト概要

* **プロジェクト名（仮）**: Campus Connect（キャンパス・コネクト）
* **目的**: 同じ大学に通う学生同士が、物理的なすれ違いをきっかけに、匿名でつながる機会を提供する。
* **コンセプト**: 「リアル × デジタル」による、偶然の再会を重視した自然なマッチング体験。
* **対象ユーザー**: 同一大学の学生のみ。

### 2. 開発方針

* **MVP（Minimum Viable Product）開発**
    * まずは必要最小限の機能で迅速にリリースし、ユーザーの反応を計測します。改善や機能追加は、リリース後のアップデートで段階的に行います。
* **ユーザー認証の段階的導入**
    * **初期リリース（MVP）では、ユーザー認証を設けません。** App Store等での配布を学内向けに限定することで対応します。
    * 利用者の増加やコミュニティの安全性を考慮し、将来的なアップデートで**大学メールアドレスによる認証機能の追加を検討します。**

### 3. 機能要件

#### 3.1. ユーザープロフィール
* **写真**: 1枚のみ登録必須。ただし顔写真である必要はありません（イラスト等も可）。
* **学部**: 運営側が用意した大学の学部リストからの選択式です。
* **趣味**: ユーザーが自由に作成・選択できるタグ形式（複数選択可）です。
    * *注: MVPではタグの管理機能（重複・不適切タグ対策）は設けない、将来的な課題とします。*
* **自己紹介**: 200字までの自由記述です。
* **性別**: 「男性」「女性」「その他／回答しない」から選択します。
* **SNSアカウント**: 任意でX (旧Twitter)やInstagram等のIDを登録できます。

#### 3.2. BLEによるすれ違い検知
* **検知条件**: 以下の条件をすべて満たした場合に「すれ違い」と認定します。
    * **距離**: 室内で同じ空間にいるレベル（5-10m程度 / **RSSI: -80dBm前後**）。
    * **時間**: 瞬間的（**1-2秒程度**）の継続。
* **一時識別子 (tempID)**: 端末ごとに15分周期で変化する一時的なIDを広告（Advertise）します。
* **履歴の仕様**:
    * すれ違い履歴は過去24時間分を保持します。
    * 同じ相手と複数回すれ違った場合は、最新のすれ違い情報で上書きされます（履歴には常に1件のみ表示）。

#### 3.3. いいね機能
* **完全匿名**: ユーザーはすれ違い履歴の相手に「いいね」ができますが、その事実は相手に一切通知されません。誰が自分に「いいね」したかもわかりません。

#### 3.4. マッチング
* **成立条件**: 相互に「いいね」をしているユーザー同士が、物理的に**再度すれ違った瞬間**に成立します。
* **チャット機能**: **ありません**。マッチング後の交流は、プロフィールに登録されたSNSや、現実世界での接触に委ねます。

#### 3.5. 友達リスト
* マッチングが成立した相手が自動的に追加される専用リストです。
* 相手のプロフィール（SNSアカウント含む）をいつでも確認できます。
* リストから相手を削除する機能はなく、関係を断つにはブロック機能を利用します。

#### 3.6. ブロック機能
* ブロックしたこと、されたことは相手に通知されません。
* ブロックすると、以降のすれ違い検知から相互に除外され、成立していたマッチングも解消されます。

#### 3.7. 通知機能
* **マッチングが成立した瞬間のみ**、両者にプッシュ通知が送られます。（例：「〇〇さんとまた会いましたね！」）
* その他のタイミング（いいねされた時、すれ違った時など）での通知は行いません。

#### 3.8. 性別・マッチング対象設定
* プロフィール編集画面に「同性の友達を探す」のON/OFFスイッチを設けます。
* スイッチをONにすると、マッチング対象が同性に限定され、対象外の性別のユーザーはすれ違い履歴に一切表示されなくなります。

### 4. 非機能要件

* **技術スタック**
    * **UI**: Flutter (Dart)
    * **BLE通信**: Swift/Kotlin (Platform Channel経由)
    * **バックエンド**: Firebase
* **プライバシー設計**
    * BLE通信ではtempID以外の個人情報を一切送信しません。
    * MACアドレスのランダム化を行います。
    * ユーザー情報はすべてクラウド側（Firebase）で管理します。
* **パフォーマンス**
    * バッテリー消費と検知精度のバランスを重視し、iOS/AndroidのOS標準ガイドラインに準拠した範囲でバックグラウンド動作を実装します。
